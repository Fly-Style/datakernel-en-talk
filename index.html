<!DOCTYPE html>
<html lang="en">

<title>Welcome to DataKernel</title>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }

        @font-face {
            font-family: "Lato";
            src: url("Lato/Lato-Regular.ttf");
        }

        @font-face {
            font-family: "Expressway";
            src: url("Lato/ExpresswaySoft.ttf");
        }

        @font-face {
            font-family: "ExpresswayBk";
            src: url("Lato/ExpresswaySoftBk.ttf");
        }

        .slide {
            font-family: "ExpresswayBk";
            background: #fff3e5;
            font-size: 1.65rem;
        }

        .slide code {
            font-family: "Fira Code", "Retina", monospace;
            font-size: 1.5rem;
        }

        .slide #worker {
            font-family: "mononoki", "Regular", monospace;
            font-size: 1.3rem;
        }

        .slide blockquote {
            font-size: 1.5rem;
        }

        li::before {
            content: close-quote;
        }

        #telegram {
            font-family: "Fira Code", "Retina", monospace
        }

        #announcement {
            font-size: 5rem;
        }
    </style>
</head>

<body class="shower list">
    <header class="caption">
        <h1>DataKernel. Rules.</h1>
    </header>

    <section class="slide" id="cover">
        <br>
        <h2>В поисках</h2>
        <h2>асинхронного счастья</h2>
        <style>
            #cover h2 {
                margin: 30px 0 0;
                text-align: center;
                font-size: 96px;
            }

            #cover p {
                margin: 10px 0 0;
                text-align: center;
                /* color: white; */
                font-style: italic;
                font-size: 24px;
            }

            #cover p a {
                color: white;
            }
        </style>
    </section>

    <section class="slide">
        <figure>
            <h2>О себе : Александр Сиротенко</h2>
            <br>
            <ul>
                <li>Software Engineer <b>@datakernel.io</b></li>
                <li>Разрабатываем фреймворк DataKernel.</li>
                <li>&#128525; опенсорс.</li>
                <li>Увлекаюсь (пишу) компиляторами/рантаймами и вообще, low-level.</li>
            </ul>
        </figure>
    </section>

    <section class="slide" id="see-more">
        <h2 class="shout">
            <img src="pictures/talk.svg" alt="QR Code" style="width: 400px; height: 400px;">
        </h2>
    </section>

    <section class="slide">
        <figure>
            <h2>Safe Harbour</h2>
            <br>
            <p align="center">Всё, о чем я буду сейчас рассказывать, может ещё поменяться.</p>
            <p align="center" class="next">В лучшую сторону, уверен ;)</p>
        </figure>
    </section>

    <section class="slide">
        <figure>
            <h2>Модели многозадачности</h2>
            <ul>
                <li>Concurrency : потоки и их синхронизация</li>
                <li class="next">Параллелизм (ФП) : потоки в ленивых языках</li>
                <li class="next">Модель акторов : акторы, кидющиеся <strike>какаш..</strike> сообщениями</li>
                <li class="next">Асинхронное : callbacks, promises/futures, сопрограммы</li>
                <li class="next">Реактивное : Observables. Эксель, короче говоря.</li>
            </ul>
        </figure>
    </section>

    <section class="slide">
        <figure>
            <h2>Боль выделена жирным</h2>
            <ul>
                <li>Concurrency : потоки и их <b>синхронизация</b></li>
                <li>Параллелизм (ФП) : потоки в <b>ленивых языках</b></li>
                <li>Модель акторов : акторы, <b>кидющиеся</b> <strike>какаш..</strike> <b>сообщениями</b></li>
                <li>Асинхронное : <b>callbacks</b>, <b>promises/futures</b>, сопрограммы</li>
                <li>Реактивное : <b>Observables</b>. Эксель, короче говоря.</li>
            </ul>
        </figure>
    </section>

    <!-- Shipilёv CURVE-->
    <section class="slide" id="see-more">
        <h2 style="font-size: 2.25rem;">Кривая имени Ш.</h2>
        <figure class="next">
            <a href="https://www.youtube.com/watch?v=p2b4JHESEOc">
                <img src="pictures/curve_sh.png" alt="Shipilёv Curve"
                    style="margin-left:5rem; width: 600px; height: 450px;">
            </a>
        </figure>
    </section>

    <!-- DATAKERNEL -->
    <section class="slide" id="chapter">
        <h2 class="shout shrink">DataKernel</h2>
    </section>

    <!-- OVERALL -->
    <section class="slide">
        <figure>
            <h2>Ключевые особенности архитектуры</h2>
            <ul>
                <li>Хорошо разбит на модули без лишних зависимостей</li>
                <li class="next">Полностью асинхронный (на манер Node.js)</li>
                <li class="next">Максимизация работы в рамках одного потока</li>
                <li class="next">Быстрое внедрение зависимостей и запуск приложений</li>
                <li class="next">Низкий порог входа</li>
            </ul>
        </figure>
    </section>

    <!-- HOW DOES IT WORKS -->
    <section class="slide">
        <figure>
            <h2>Вкратце : как это работает</h2>
            <ul>
                <li>Приложение стартует с помощью модуля <b>Launcher</b></li>
                <li class="next">Все зависимости при старте внедряются модулем <b>Service Graph</b></li>
                <li class="next">Модуль <b>WorkerPool</b> обеспечит исполнение асинхронных задач </li>
                <li class="next">Основной работяга в этой схеме - асинхронный примитив <b>Promise</b></li>
                <li class="next">За годы работы были разработаны производительные и удобные
                    HTTP, TCP, RPC, memcached сервера;</li>
                <li class="next">Получился пригодный почти для всего фреймворк. Welcome!</li>
            </ul>
        </figure>
    </section>

    <!-- DATAKERNEL COMPONENTS -->
    <section class="slide" id="chapter">
        <h2 class="shout shrink">Core Components</h2>
    </section>

    <!-- PROMISES -->
    <section class="slide">
        <figure>
            <h2>Promise</h2>
            <ul>
                <li>Лёгкая обёртка над результатом асинхронного вычисления</li>
                <li class="next">Задизайнены для работы с однопоточным event loop.</li>
                <li class="next">Совместимы с <b>java.util.concurrent.CompletableFuture</b></li>
            </ul>
            <div class="next" align="center">
                <p><code>oneCallMeasure : 12.736 ± 0.980 ns/op</code></p>
                <p><code>combineMeasure : 27.590 ± 0.829 ns/op</code></p>
            </div>
        </figure>
    </section>

    <!-- PROMISES IN SCALE #1 -->
    <section class="slide">
        <h2>Под лупой : Promise</h2>
        <figure align="center">
            <picture>
                <img src="pictures/promises.svg" alt="Promise Architecture Diagram">
            </picture>
        </figure>
    </section>

    <!-- PROMISES IN SCALE #2 -->
    <section class="slide">
        <h2>Под лупой : Promise</h2>
        <figure align="center">
            <picture>
                <img src="pictures/promises_1.svg" alt="Promise Architecture Diagram">
            </picture>
        </figure>
    </section>

    <!-- PROMISES IN SCALE #3 -->
    <section class="slide">
        <h2>Под лупой : Promise</h2>
        <figure align="center">
            <picture>
                <img src="pictures/promises_2.svg" alt="Promise Architecture Diagram">
            </picture>
        </figure>
    </section>

    <!-- PROMISES IN SCALE #4 -->
    <section class="slide">
        <h2>Под лупой : Promise</h2>
        <figure align="center">
            <picture>
                <img src="pictures/promises_3.svg" alt="Promise Architecture Diagram">
            </picture>
        </figure>
    </section>

    <!-- EVENTLOOP -->
    <section class="slide">
        <figure>
            <h2>Event Loop</h2>
            <ul>
                <li>Менеджер асинхронных операций с очередью задач</li>
                <li class="next">Сидит на одном потоке и максимизирует пользование только одного ядра.</li>
                <li class="next">"Дружит" с GC : переиспользует массивы и байтбуфера</li>
                <li class="next">Доступны и блокирующие операции <i>(но лучше не надо)</i></li>
            </ul>
        </figure>
    </section>

    <!-- WORKER POOL -->
    <section class="slide">
        <figure>
            <h2>Worker Pool</h2>
            <ul>
                <li>Event Loop-ом ли единым в наших приложениях?</li>
                <li class="next">Приложение на DK работает с <b>множеством</b> циклов событий!</li>
                <li class="next">Для эффективной работы таких приложений используется <b>внедрение зависимостей</b></li>
            </ul>
        </figure>
    </section>

    <!-- WORKER POOL CODE -->
    <section class="slide">
        <h2>Worker Pool</h2>
        <figure>
            <pre>
                <code id="worker"><font color="##7B68EE">@Provides</font></code>
                <code id="worker"><font color="##7B68EE">WorkerPool</font> workerPool(<font color="##7B68EE">WorkerPools</font> workerPools) { </code>
                <code id="worker">   <font color="#BA55D3">return</font> workerPools.createPool(4);</code>
                <code id="worker">}</code>
                <code id="worker"><font color="##7B68EE">@Provides</font></code>
                <code id="worker"><font color="##7B68EE">@Worker</font></code>
                <code id="worker"><font color="##7B68EE">String</font> string(<font color="##7B68EE">@WorkerId</font> <font color="##7B68EE">int</font> workerId) {</code>
                <code id="worker">   <font color="#BA55D3">return</font> <font color="#6B8E23">"Hello from worker #"</font> + workerId;</code>
                <code id="worker">}</code>
                </code>
            </pre>
        </figure>
    </section>

    <!-- WORKER POOL PIC -->
    <section class="slide">
        <h2>Worker Pool</h2>
        <figure align="center">
            <picture>
                <img src="pictures/workerpool.svg">
            </picture>
        </figure>
    </section>

    <!-- DI -->
    <section class="slide">
        <figure>
            <h2>Dependency Injection</h2>
            <ul>
                <li class="next">Да-да, у нас есть своё внедрение зависимостей!</li>
                <li class="next">Работает перед стартом работы приложения (startup time)</li>
                <li class="next">Крайне шустро&#x301; : использует уже "запеченые" объекты</li>
                <li class="next">Поддерживает скоупы, синглетоны и экземпляры фабрик, <b>модули</b></li>
            </ul>
        </figure>
    </section>

    <!-- DI in deep -->
    <section class="slide">
        <figure>
            <h2>Dependency Injection : крупно</h2>
            <ul>
                <li>Да-да, у нас есть своё внедрение зависимостей!</li>
                <li>Работает перед стартом работы приложения (startup time)</li>
                <li><b>Крайне шустро&#x301; : использует уже "запеченые" объекты</b></li>
                <li>Поддерживает скоупы, синглетоны и экземпляры фабрик, <b>модули</b></li>
            </ul>
        </figure>
    </section>

    <!-- DI in deep #2 -->
    <section class="slide">
        <figure>
            <h2>Dependency Injection : крупно</h2>
            <ul>
                <li></li>
                <li></li>
                <li><b>Крайне шустро&#x301; : использует уже "запеченые" объекты</b></li>
                <li></li>
            </ul>
        </figure>
    </section>

    <!-- DI BENCHMARKS -->
    <section class="slide">
        <figure>
            <h2>Dependency Injection</h2>
            <br>
            <div class="next" align="center">
                <p><code>DataKernelDI      : 287.240 ± 10.404  ns/op</code></p>
                <p><code>GuiceDiBenchmark  : 750.395 ± 58.030  ns/op</code></p>
                <p><code>SpringDiBenchmark : 75629.3 ± 571.223 ns/op</code></p>
            </div>
        </figure>
    </section>

    <!-- LAUNCHER -->
    <section class="slide">
        <figure>
            <h2>Launcher</h2>
            <ul>
                <li>Технология, которая избавила нас от серверов приложений</li>
                <li class="next">Умная надстройка над <b> main </b> методом</li>
                <li class="next">Проводит много манипуляций с помощью DI, стартует все вложенные сервисы, логгирует</li>
                <li class="next">Он же обеспечивает и производит и остановку приложения.</li>
            </ul>
        </figure>
    </section>

    <!-- SERVICE GRAPH -->
    <section class="slide">
        <figure>
            <h2>Service Graph</h2>
            <ul>
                <li>Предназначен для использования в качестве средства для старта / стопа сервисов приложения в
                    соответствии с графом зависимостей</li>
                <li>Работает в сочетании с модулем <b>DI</b> в <b>Launcher</b></li>
                <li>Обходит граф зависимостей in <b>postoder</b> way</li>
            </ul>
        </figure>
    </section>

    <!-- DATAKERNEL IN ACTION -->
    <section class="slide" id="chapter">
        <h2 class="shout shrink">DataKernel in Action</h2>
    </section>

    <!-- RPC -->
    <section class="slide">
        <figure>
            <h2>RPC</h2>
            <ul>
                <li>Написаны готовые решения c помощью RPC</li>
                <li class="next">Поддерживается много вкусных стратегий отправки</li>
                <li class="next"><b>Шардирование</b> и оптимизированный <b>rendezvous hashing</b></li>
                <li class="next">На отдельных ворклоадах выдавало до 15M RPS</li>
            </ul>
            <div class="next" align="center">
                <p><code>RPC benchmark : Requests per sercond : 14222727</code></p>
            </div>
        </figure>
    </section>

    <!-- MEMCACHED RPC -->
    <section class="slide">
        <figure>
            <h2>Memcached RPC</h2>
            <ul>
                <li>Memcached-подобная in-memory БД с общением по RPC</li>
                <li class="next">Хорошо масштабируется</li>
                <li class="next">При благоприятных условиях на пике - до 9M RPS</li>
            </ul>
            <div class="next" align="center">
                <p><code>Put benchmark : Requests per sercond : 9478672</code></p>
                <p><code>Get benchmark : Requests per sercond : 8490405</code></p>
            </div>
        </figure>
    </section>

    <!-- CSP & DATASTREAMS -->
    <section class="slide">
        <h2>I/O : CSP & Datastream</h2>
        <div class="columns two" style="font-size:1.15rem;">
            <ul align="center">
                <p style="font-size:1.4rem;" align="center"><b>CSP</b></p>
                <li>Вдохновлен каналами из Golang </li>
                <li class="next">Комбинированная push-pull механика</li>
                <li class="next">"Питается" буферами среднего размера</li>
                <li class="next">Эффективный async back-pressure</li>
                <li class="next">Простой developer experience</li>
                <li class="next">Быстр, но медленнее Datastream</li>
            </ul>
            <ul align="center">
                <p style="font-size:1.4rem;"><b>Datastream</b></p>
                <li>Реактивный асинхронный</li>
                <li class="next">Работа по принципу <b>Tell Don't Ask</b></li>
                <li class="next">Хорош для маленьких кусочков данных</li>
                <li class="next">Эффективный контроль перегрузки</li>
                <li class="next">Чертовски хорош и быстр, но сложнее DX</li>
                <li class="next">Пользует <b>Event Loop</b> в хвост и гриву</li>
            </ul>
        </div>
        <p class="next" style="margin:1rem;" align="center">CSP и Datastream совместимы друг с другом</p>
    </section>

    <!-- REAL WORLD -->
    <section class="slide">
        <figure>
            <h2>Реальные успехи DataKernel</h2>
            <ul>
                <li>Ворклоад связан с доставкой рекламы на разные страницы</li>
                <li class="next">Переписав приложение на DataKernel,
                    мы избавились от проблем с производительностью и масштабируемостью</li>
            </ul>
        </figure>
    </section>

    <!-- Summary -->
    <section class="slide">
        <figure>
            <h2>Summary : наш опыт</h2>
            <ul>
                <li>Не нужно бояться экспериментов, когда сроки и бизнес позволяют</li>
                <li class="next">Связка хорошей CS подготовки с опытом разработки способна сгенерировать достойный
                    продукт</li>
                <li class="next">Попробуйте DataKernel, присылайте обратную связь</li>
                <li class="next"><b>PR are welcomed</b> ☺️</li>
            </ul>
        </figure>
    </section>

    <section class="slide" id="see-more">
        <h2 class="shout">
            <img src="pictures/twitter.png" alt="Telegram logo" style="width: 200px; height: 150px;">
            <div id="telegram">@FlyCreat1ve</div>
        </h2>
    </section>

    <section class="slide" id="see-more">
        <h2 class="shout">
            <img src="pictures/qr-code.png" alt="QR Code" style="width: 450px; height: 450px;">
        </h2>
    </section>

    <section class="slide" id="see-more">
        <h2 class="shout">
            <p>Спасибо за внимание!</p>
            <p>Вопросы?</p>

        </h2>
        <style>
            #see-more h2 {
                font-size: 72px
            }

            #see-more img {
                width: 0.72em;
                height: 0.72em;
            }
        </style>
    </section>

    <footer class="badge">
        <a href="https://github.com/shower/shower">Fork me on GitHub</a>
    </footer>

    <div class="progress"></div>

    <script src="shower/shower.min.js"></script>
    <!-- Copyright © 2019 Alexander Syrotenko -->

</body>

</html>